{"remainingRequest":"C:\\Users\\erwan\\Documents\\GitHub\\ProjetS3\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\erwan\\Documents\\GitHub\\ProjetS3\\client\\src\\views\\forum\\ajouterForum.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\erwan\\Documents\\GitHub\\ProjetS3\\client\\src\\views\\forum\\ajouterForum.vue","mtime":1612703515197},{"path":"C:\\Users\\erwan\\Documents\\GitHub\\ProjetS3\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610367711590},{"path":"C:\\Users\\erwan\\Documents\\GitHub\\ProjetS3\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1610367710935},{"path":"C:\\Users\\erwan\\Documents\\GitHub\\ProjetS3\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610367711590},{"path":"C:\\Users\\erwan\\Documents\\GitHub\\ProjetS3\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1610367731052}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgc3dhbCBmcm9tICdzd2VldGFsZXJ0JzsNCg0KaW1wb3J0IFZ1ZUp3dERlY29kZSBmcm9tICJ2dWUtand0LWRlY29kZSI7DQppbXBvcnQgSGVhZGVyIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvaGVhZGVyIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgcHJvcHM6IFsibm9tVXRpbGlzYXRldXIiXSwNCiAgY29tcG9uZW50czogew0KICAgIEhlYWRlciwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlckxvZ2luOiAiIiwNCiAgICAgIGZvcnVtOiB7DQogICAgICAgIG5vbUZvcnVtOiAiIiwNCiAgICAgICAgdHlwZUZvcnVtOiAiIiwNCiAgICAgICAgZGVzY3JpcHRpb25Gb3J1bTogIiIsDQogICAgICAgIGlsbHVzdHJhdGlvbkZvcnVtOiAiIiwNCiAgICAgICAgZGF0ZUZvcnVtOiAiIiwNCiAgICAgICAgYXV0ZXVyRm9ydW06ICIiLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcmVzZXRJbWFnZSgpIHsNCiAgICAgIGxldCBpbnB1dEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmlucHV0X2ltYWdlIik7DQogICAgICBpbnB1dEltYWdlLnZhbHVlID0gIiI7DQogICAgfSwNCiAgYXN5bmMgZ2V0SW5mb1VzZXIoKSB7DQogICAgICB0cnkgew0KICAgICAgICBjb25zdCBwYXJhbXMgPSB7DQogICAgICAgICAgbm9tVXRpbGlzYXRldXI6IHRoaXMubm9tVXRpbGlzYXRldXIsDQogICAgICAgIH07DQogICAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLiRodHRwLmdldChgL3VzZXIvbm9tVXRpbGlzYXRldXJgLCB7IHBhcmFtcyB9KTsNCiAgICAgICAgdGhpcy51c2VyID0gaW5mby5kYXRhLnVzZXI7DQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldFVzZXJEZXRhaWxzKCkgew0KICAgICAgDQogICAgICBsZXQgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0Iik7DQogICAgICBpZiAoIXRva2VuKSB7DQogICAgICAgIHRoaXMudXNlckxvZ2luID0gbnVsbDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBkZWNvZGVkID0gVnVlSnd0RGVjb2RlLmRlY29kZSh0b2tlbik7DQogICAgICAgIHRoaXMudXNlckxvZ2luID0gZGVjb2RlZC5ub21VdGlsaXNhdGV1cjsNCiAgICAgICAgY29uc29sZS5sb2codGhpcy51c2VyTG9naW4pDQogICAgICB9DQogICAgfSwNCiAgDQogIA0KICAgIA0KICAgIGFzeW5jIHJlZ2lzdGVyRm9ydW0oKXsNCiAgICAgIA0KICAgICAgbGV0IHRpdHJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpdHJlJykudmFsdWU7DQogICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dGFyZWEnKS52YWx1ZTsNCiAgICAgIGxldCB0eXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR5cGUnKS52YWx1ZTsNCiAgICAgIGNvbnNvbGUubG9nKHRpdHJlLHR5cGUsZGVzY3JpcHRpb24pOw0KICAgICAgdHJ5ew0KICAgICAgICB0aGlzLmZvcnVtLm5vbUZvcnVtID0gdGl0cmU7DQogICAgICAgIHRoaXMuZm9ydW0uZGF0ZUZvcnVtID0gbmV3IERhdGUoKTsNCiAgICAgICAgdGhpcy5mb3J1bS5hdXRldXJGb3J1bSA9IHRoaXMudXNlckxvZ2luOw0KICAgICAgICB0aGlzLmZvcnVtLmlsbHVzdHJhdGlvbkZvcnVtID0gIi9jbGllbnQvc3JjL2Fzc2V0cy9wYXR0ZXJuLnBuZyI7DQogICAgICAgIHRoaXMuZm9ydW0uZGVzY3JpcHRpb25Gb3J1bSA9IGRlc2NyaXB0aW9uOw0KICAgICAgICB0aGlzLmZvcnVtLnR5cGVGb3J1bSA9IHR5cGU7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ydW0pDQogICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgiL2ZvcnVtL2FkZEZvcnVtIix0aGlzLmZvcnVtKTsNCiAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID09IDIwMSl7DQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9mb3J1bSIpOw0KICAgICAgICAgIHN3YWwoIlN1Y2Nlc3MiLCJDcsOpYXRpb24gZm9ydW0gcsOpdXNzaWUiICwic3VjY2VzcyIpOw0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICBzd2FsKCJFcnJvciIsIkxhIGNyw6lhdGlvbiBkdSBmb3J1bSBhIMOpY2hvdcOpICIpOw0KICAgICAgICB9DQogICAgICB9Y2F0Y2goZXJyKXsNCiAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICB9DQogICAgfQ0KICAgICwNCiAgDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRVc2VyRGV0YWlscygpOw0KICB9DQp9Ow0K"},{"version":3,"sources":["ajouterForum.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ajouterForum.vue","sourceRoot":"src/views/forum","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <Header />\r\n    <div class=\"wrapper\">\r\n      <h2 class=\"title\">Nouveau forum</h2>\r\n      <form class=\"form\" @submit.prevent=\"registerForum\">\r\n        <label class=\"form_label\">Titre :</label>\r\n        <input type=\"text\" class=\"form_input titre\" name=\"titreForum\" required />\r\n        <label class=\"form_label\">Type :</label>\r\n        <select name=\"type\" class=\"form_input type\">\r\n          <option value=\"publique\">Publique</option>\r\n          <option value=\"privée\">Privée</option>\r\n        </select>\r\n        <label class=\"form_label\">Description :</label>\r\n        <textarea\r\n          required\r\n          name=\"description\"\r\n          class=\"form_input textarea\"\r\n          cols=\"30\"\r\n          rows=\"10\"\r\n        ></textarea>\r\n        <label class=\"form_label\">Ajouter une photo : </label>\r\n        <div class=\"inputImage_wrapper\">\r\n          <input type=\"file\" class=\"form_input input_image\" />\r\n          <span @click=\"resetImage\" class=\"reset_image\">Reset image</span>\r\n        </div>\r\n\r\n        <input  type=\"submit\" value=\"Publier forum\" />\r\n        <!-- <router-link class=\"retour\">Retour</router-link> -->\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport swal from 'sweetalert';\r\n\r\nimport VueJwtDecode from \"vue-jwt-decode\";\r\nimport Header from \"../../components/header\";\r\nexport default {\r\n  props: [\"nomUtilisateur\"],\r\n  components: {\r\n    Header,\r\n  },\r\n  data() {\r\n    return {\r\n      userLogin: \"\",\r\n      forum: {\r\n        nomForum: \"\",\r\n        typeForum: \"\",\r\n        descriptionForum: \"\",\r\n        illustrationForum: \"\",\r\n        dateForum: \"\",\r\n        auteurForum: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    resetImage() {\r\n      let inputImage = document.querySelector(\".input_image\");\r\n      inputImage.value = \"\";\r\n    },\r\n  async getInfoUser() {\r\n      try {\r\n        const params = {\r\n          nomUtilisateur: this.nomUtilisateur,\r\n        };\r\n        const info = await this.$http.get(`/user/nomUtilisateur`, { params });\r\n        this.user = info.data.user;\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    getUserDetails() {\r\n      \r\n      let token = localStorage.getItem(\"jwt\");\r\n      if (!token) {\r\n        this.userLogin = null;\r\n      } else {\r\n        let decoded = VueJwtDecode.decode(token);\r\n        this.userLogin = decoded.nomUtilisateur;\r\n        console.log(this.userLogin)\r\n      }\r\n    },\r\n  \r\n  \r\n    \r\n    async registerForum(){\r\n      \r\n      let titre = document.querySelector('.titre').value;\r\n      let description = document.querySelector('.textarea').value;\r\n      let type = document.querySelector('.type').value;\r\n      console.log(titre,type,description);\r\n      try{\r\n        this.forum.nomForum = titre;\r\n        this.forum.dateForum = new Date();\r\n        this.forum.auteurForum = this.userLogin;\r\n        this.forum.illustrationForum = \"/client/src/assets/pattern.png\";\r\n        this.forum.descriptionForum = description;\r\n        this.forum.typeForum = type;\r\n        console.log(this.forum)\r\n        let response = await this.$http.post(\"/forum/addForum\",this.forum);\r\n        if(response.status == 201){\r\n          this.$router.push(\"/forum\");\r\n          swal(\"Success\",\"Création forum réussie\" ,\"success\");\r\n        }else{\r\n          swal(\"Error\",\"La création du forum a échoué \");\r\n        }\r\n      }catch(err){\r\n       console.log(err)\r\n      }\r\n    }\r\n    ,\r\n  \r\n  },\r\n  created() {\r\n    this.getUserDetails();\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  width: 80%;\r\n  max-width: 1300px;\r\n}\r\n\r\n.form {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  &_input {\r\n    border: solid 1px #26f191;\r\n    border-radius: 5px;\r\n    padding: 0.5em;\r\n  }\r\n  .textarea {\r\n    resize: none;\r\n  }\r\n\r\n  .inputImage_wrapper {\r\n    .reset_image {\r\n      cursor: pointer;\r\n      display: inline-block;\r\n      margin-left: 1em;\r\n      color: #2692f1;\r\n    }\r\n  }\r\n\r\n  &_input:focus {\r\n    outline: none;\r\n    border: solid 2px #2692f1;\r\n    border-radius: 5px;\r\n  }\r\n}\r\n</style>\r\n"]}]}