{"remainingRequest":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\src\\views\\forum\\ajouterForum.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\src\\views\\forum\\ajouterForum.vue","mtime":1612432290511},{"path":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1612117585820},{"path":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1612117580510},{"path":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1612117585820},{"path":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1612117788453}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBWdWVKd3REZWNvZGUgZnJvbSAidnVlLWp3dC1kZWNvZGUiOw0KaW1wb3J0IEhlYWRlciBmcm9tICIuLi8uLi9jb21wb25lbnRzL2hlYWRlciI7DQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiBbIm5vbVV0aWxpc2F0ZXVyIl0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBIZWFkZXIsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVzZXJMb2dpbjogIiIsDQogICAgICBmb3J1bTogew0KICAgICAgICBub21Gb3J1bTogIiIsDQogICAgICAgIHR5cGVGb3J1bTogIiIsDQogICAgICAgIGRlc2NyaXB0aW9uRm9ydW06ICIiLA0KICAgICAgICBpbGx1c3RyYXRpb25Gb3J1bTogIiIsDQogICAgICAgIGRhdGVGb3J1bTogIiIsDQogICAgICAgIGF1dGV1ckZvcnVtOiAiIiwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHJlc2V0SW1hZ2UoKSB7DQogICAgICBsZXQgaW5wdXRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5pbnB1dF9pbWFnZSIpOw0KICAgICAgaW5wdXRJbWFnZS52YWx1ZSA9ICIiOw0KICAgIH0sDQogIGFzeW5jIGdldEluZm9Vc2VyKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcGFyYW1zID0gew0KICAgICAgICAgIG5vbVV0aWxpc2F0ZXVyOiB0aGlzLm5vbVV0aWxpc2F0ZXVyLA0KICAgICAgICB9Ow0KICAgICAgICBjb25zdCBpbmZvID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoYC91c2VyL25vbVV0aWxpc2F0ZXVyYCwgeyBwYXJhbXMgfSk7DQogICAgICAgIHRoaXMudXNlciA9IGluZm8uZGF0YS51c2VyOw0KICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICB9DQogICAgfSwNCiAgICBnZXRVc2VyRGV0YWlscygpIHsNCiAgICAgIA0KICAgICAgbGV0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dCIpOw0KICAgICAgaWYgKCF0b2tlbikgew0KICAgICAgICB0aGlzLnVzZXJMb2dpbiA9IG51bGw7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBsZXQgZGVjb2RlZCA9IFZ1ZUp3dERlY29kZS5kZWNvZGUodG9rZW4pOw0KICAgICAgICB0aGlzLnVzZXJMb2dpbiA9IGRlY29kZWQubm9tVXRpbGlzYXRldXI7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlckxvZ2luKQ0KICAgICAgfQ0KICAgIH0sDQogIA0KICANCiAgICANCiAgICBhc3luYyByZWdpc3RlckZvcnVtKCl7DQogICAgICANCiAgICAgIGxldCB0aXRyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aXRyZScpLnZhbHVlOw0KICAgICAgbGV0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHRhcmVhJykudmFsdWU7DQogICAgICBsZXQgdHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50eXBlJykudmFsdWU7DQogICAgICBjb25zb2xlLmxvZyh0aXRyZSx0eXBlLGRlc2NyaXB0aW9uKTsNCiAgICAgIHRyeXsNCiAgICAgICAgdGhpcy5mb3J1bS5ub21Gb3J1bSA9IHRpdHJlOw0KICAgICAgICB0aGlzLmZvcnVtLmRhdGVGb3J1bSA9IG5ldyBEYXRlKCk7DQogICAgICAgIHRoaXMuZm9ydW0uYXV0ZXVyRm9ydW0gPSB0aGlzLnVzZXJMb2dpbjsNCiAgICAgICAgdGhpcy5mb3J1bS5pbGx1c3RyYXRpb25Gb3J1bSA9ICIvY2xpZW50L3NyYy9hc3NldHMvcGF0dGVybi5wbmciOw0KICAgICAgICB0aGlzLmZvcnVtLmRlc2NyaXB0aW9uRm9ydW0gPSBkZXNjcmlwdGlvbjsNCiAgICAgICAgdGhpcy5mb3J1bS50eXBlRm9ydW0gPSB0eXBlOw0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcnVtKQ0KICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoIi9mb3J1bS9hZGRGb3J1bSIsdGhpcy5mb3J1bSk7DQogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgIH1jYXRjaChlcnIpew0KICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgIH0NCiAgICB9DQogICAgLA0KICANCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFVzZXJEZXRhaWxzKCk7DQogIH0NCn07DQo="},{"version":3,"sources":["ajouterForum.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ajouterForum.vue","sourceRoot":"src/views/forum","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <Header />\r\n    <div class=\"wrapper\">\r\n      <h2 class=\"title\">Nouveau forum</h2>\r\n      <form class=\"form\" @submit.prevent=\"registerForum\">\r\n        <label class=\"form_label\">Titre :</label>\r\n        <input type=\"text\" class=\"form_input titre\" name=\"titreForum\" />\r\n        <label class=\"form_label\">Type :</label>\r\n        <select name=\"type\" class=\"form_input type\">\r\n          <option value=\"publique\">Publique</option>\r\n          <option value=\"privée\">Privée</option>\r\n        </select>\r\n        <label class=\"form_label\">Description :</label>\r\n        <textarea\r\n          name=\"description\"\r\n          class=\"form_input textarea\"\r\n          cols=\"30\"\r\n          rows=\"10\"\r\n        ></textarea>\r\n        <label class=\"form_label\">Ajouter une photo : </label>\r\n        <div class=\"inputImage_wrapper\">\r\n          <input type=\"file\" class=\"form_input input_image\" />\r\n          <span @click=\"resetImage\" class=\"reset_image\">Reset image</span>\r\n        </div>\r\n\r\n        <input  type=\"submit\" value=\"Publier forum\" />\r\n        <!-- <router-link class=\"retour\">Retour</router-link> -->\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport VueJwtDecode from \"vue-jwt-decode\";\r\nimport Header from \"../../components/header\";\r\nexport default {\r\n  props: [\"nomUtilisateur\"],\r\n  components: {\r\n    Header,\r\n  },\r\n  data() {\r\n    return {\r\n      userLogin: \"\",\r\n      forum: {\r\n        nomForum: \"\",\r\n        typeForum: \"\",\r\n        descriptionForum: \"\",\r\n        illustrationForum: \"\",\r\n        dateForum: \"\",\r\n        auteurForum: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    resetImage() {\r\n      let inputImage = document.querySelector(\".input_image\");\r\n      inputImage.value = \"\";\r\n    },\r\n  async getInfoUser() {\r\n      try {\r\n        const params = {\r\n          nomUtilisateur: this.nomUtilisateur,\r\n        };\r\n        const info = await this.$http.get(`/user/nomUtilisateur`, { params });\r\n        this.user = info.data.user;\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    getUserDetails() {\r\n      \r\n      let token = localStorage.getItem(\"jwt\");\r\n      if (!token) {\r\n        this.userLogin = null;\r\n      } else {\r\n        let decoded = VueJwtDecode.decode(token);\r\n        this.userLogin = decoded.nomUtilisateur;\r\n        console.log(this.userLogin)\r\n      }\r\n    },\r\n  \r\n  \r\n    \r\n    async registerForum(){\r\n      \r\n      let titre = document.querySelector('.titre').value;\r\n      let description = document.querySelector('.textarea').value;\r\n      let type = document.querySelector('.type').value;\r\n      console.log(titre,type,description);\r\n      try{\r\n        this.forum.nomForum = titre;\r\n        this.forum.dateForum = new Date();\r\n        this.forum.auteurForum = this.userLogin;\r\n        this.forum.illustrationForum = \"/client/src/assets/pattern.png\";\r\n        this.forum.descriptionForum = description;\r\n        this.forum.typeForum = type;\r\n        console.log(this.forum)\r\n        let response = await this.$http.post(\"/forum/addForum\",this.forum);\r\n        console.log(response);\r\n      }catch(err){\r\n       console.log(err)\r\n      }\r\n    }\r\n    ,\r\n  \r\n  },\r\n  created() {\r\n    this.getUserDetails();\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  width: 80%;\r\n  max-width: 1300px;\r\n}\r\n\r\n.form {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  &_input {\r\n    border: solid 1px #26f191;\r\n    border-radius: 5px;\r\n    padding: 0.5em;\r\n  }\r\n  .textarea {\r\n    resize: none;\r\n  }\r\n\r\n  .inputImage_wrapper {\r\n    .reset_image {\r\n      cursor: pointer;\r\n      display: inline-block;\r\n      margin-left: 1em;\r\n      color: #2692f1;\r\n    }\r\n  }\r\n\r\n  &_input:focus {\r\n    outline: none;\r\n    border: solid 2px #2692f1;\r\n    border-radius: 5px;\r\n  }\r\n}\r\n</style>\r\n"]}]}