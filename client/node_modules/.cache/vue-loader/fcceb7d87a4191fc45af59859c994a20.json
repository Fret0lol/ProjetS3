{"remainingRequest":"C:\\Users\\clemf\\Documents\\Prog\\Projet\\EnCours\\ProjetS3\\ProjetS3\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\clemf\\Documents\\Prog\\Projet\\EnCours\\ProjetS3\\ProjetS3\\client\\src\\views\\forum\\ajouterForum.vue?vue&type=style&index=0&id=531084d2&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\clemf\\Documents\\Prog\\Projet\\EnCours\\ProjetS3\\ProjetS3\\client\\src\\views\\forum\\ajouterForum.vue","mtime":1613390060173},{"path":"C:\\Users\\clemf\\Documents\\Prog\\Projet\\EnCours\\ProjetS3\\ProjetS3\\client\\node_modules\\css-loader\\dist\\cjs.js","mtime":1612791998407},{"path":"C:\\Users\\clemf\\Documents\\Prog\\Projet\\EnCours\\ProjetS3\\ProjetS3\\client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1612792006690},{"path":"C:\\Users\\clemf\\Documents\\Prog\\Projet\\EnCours\\ProjetS3\\ProjetS3\\client\\node_modules\\postcss-loader\\src\\index.js","mtime":1612792002627},{"path":"C:\\Users\\clemf\\Documents\\Prog\\Projet\\EnCours\\ProjetS3\\ProjetS3\\client\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1612792004824},{"path":"C:\\Users\\clemf\\Documents\\Prog\\Projet\\EnCours\\ProjetS3\\ProjetS3\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1612791996876},{"path":"C:\\Users\\clemf\\Documents\\Prog\\Projet\\EnCours\\ProjetS3\\ProjetS3\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1612792006689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouY29udGFpbmVyIHsNCiAgd2lkdGg6IDgwJTsNCiAgbWF4LXdpZHRoOiAxMzAwcHg7DQp9DQoNCi5mb3JtIHsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCg0KICAmX2lucHV0IHsNCiAgICBib3JkZXI6IHNvbGlkIDFweCAjMjZmMTkxOw0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBwYWRkaW5nOiAwLjVlbTsNCiAgfQ0KICAudGV4dGFyZWEgew0KICAgIHJlc2l6ZTogbm9uZTsNCiAgfQ0KDQogIC5pbnB1dEltYWdlX3dyYXBwZXIgew0KICAgIC5yZXNldF9pbWFnZSB7DQogICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgICBtYXJnaW4tbGVmdDogMWVtOw0KICAgICAgY29sb3I6ICMyNjkyZjE7DQogICAgfQ0KICB9DQoNCiAgJl9pbnB1dDpmb2N1cyB7DQogICAgb3V0bGluZTogbm9uZTsNCiAgICBib3JkZXI6IHNvbGlkIDJweCAjMjY5MmYxOw0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgfQ0KfQ0K"},{"version":3,"sources":["ajouterForum.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ajouterForum.vue","sourceRoot":"src/views/forum","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <Header />\r\n    <div class=\"wrapper\">\r\n      <h2 class=\"title\">Nouveau forum</h2>\r\n      <form class=\"form\" @submit.prevent=\"registerForum\">\r\n        <label class=\"form_label\">Titre :</label>\r\n        <input type=\"text\" class=\"form_input titre\" name=\"titreForum\" required />\r\n        <label class=\"form_label\">Type :</label>\r\n        <select name=\"type\" class=\"form_input type\">\r\n          <option value=\"publique\">Publique</option>\r\n          <option value=\"privée\">Privée</option>\r\n        </select>\r\n        <label class=\"form_label\">Description :</label>\r\n        <textarea\r\n          required\r\n          name=\"description\"\r\n          class=\"form_input textarea\"\r\n          cols=\"30\"\r\n          rows=\"10\"\r\n        ></textarea>\r\n        <label class=\"form_label\">Ajouter une photo : </label>\r\n        <div class=\"inputImage_wrapper\">\r\n          <input type=\"file\" class=\"form_input input_image\" />\r\n          <span @click=\"resetImage\" class=\"reset_image\">Reset image</span>\r\n        </div>\r\n\r\n        <input  type=\"submit\" value=\"Publier forum\" />\r\n        <!-- <router-link class=\"retour\">Retour</router-link> -->\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport swal from 'sweetalert';\r\n\r\nimport VueJwtDecode from \"vue-jwt-decode\";\r\nimport Header from \"../../components/header\";\r\nexport default {\r\n  props: [\"nomUtilisateur\"],\r\n  components: {\r\n    Header,\r\n  },\r\n  data() {\r\n    return {\r\n      userLogin: \"\",\r\n      forum: {\r\n        nomForum: \"\",\r\n        typeForum: \"\",\r\n        descriptionForum: \"\",\r\n        illustrationForum: \"\",\r\n        dateForum: \"\",\r\n        auteurForum: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    resetImage() {\r\n      let inputImage = document.querySelector(\".input_image\");\r\n      inputImage.value = \"\";\r\n    },\r\n  async getInfoUser() {\r\n      try {\r\n        const params = {\r\n          nomUtilisateur: this.nomUtilisateur,\r\n        };\r\n        const info = await this.$http.get(`/user/nomUtilisateur`, { params });\r\n        this.user = info.data.user;\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    getUserDetails() {\r\n      \r\n      let token = localStorage.getItem(\"jwt\");\r\n      if (!token) {\r\n        this.userLogin = null;\r\n      } else {\r\n        let decoded = VueJwtDecode.decode(token);\r\n        this.userLogin = decoded.nomUtilisateur;\r\n        console.log(this.userLogin)\r\n      }\r\n    },\r\n  \r\n  \r\n    \r\n    async registerForum(){\r\n      \r\n      let titre = document.querySelector('.titre').value;\r\n      let description = document.querySelector('.textarea').value;\r\n      let type = document.querySelector('.type').value;\r\n    \r\n      try{\r\n        this.forum.nomForum = titre;\r\n        this.forum.dateForum = new Date();\r\n        this.forum.auteurForum = this.userLogin;\r\n        this.forum.illustrationForum = \"/client/src/assets/pattern.png\";\r\n        this.forum.descriptionForum = description;\r\n        this.forum.typeForum = type;\r\n        console.log(this.forum)\r\n        let response = await this.$http.post(\"/forum/addForum\",this.forum);\r\n    \r\n        if(response.status == 201){\r\n          this.$router.push(\"/forum\");\r\n          swal(\"Success\",\"Création forum réussie\" ,\"success\");\r\n        }else if(response.status == 400){\r\n          swal(\"Error\",\"Ce forum existe déja ! :(\")\r\n        }\r\n        else{\r\n          swal(\"Error\",\"La création du forum a échoué \");\r\n        }\r\n      }catch(err){\r\n       console.log(err);\r\n      }\r\n    }\r\n    ,\r\n  \r\n  },\r\n  created() {\r\n    this.getUserDetails();\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  width: 80%;\r\n  max-width: 1300px;\r\n}\r\n\r\n.form {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  &_input {\r\n    border: solid 1px #26f191;\r\n    border-radius: 5px;\r\n    padding: 0.5em;\r\n  }\r\n  .textarea {\r\n    resize: none;\r\n  }\r\n\r\n  .inputImage_wrapper {\r\n    .reset_image {\r\n      cursor: pointer;\r\n      display: inline-block;\r\n      margin-left: 1em;\r\n      color: #2692f1;\r\n    }\r\n  }\r\n\r\n  &_input:focus {\r\n    outline: none;\r\n    border: solid 2px #2692f1;\r\n    border-radius: 5px;\r\n  }\r\n}\r\n</style>\r\n"]}]}