{"remainingRequest":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\src\\views\\forum\\ajouterForum.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\src\\views\\forum\\ajouterForum.vue","mtime":1612425259944},{"path":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1612117585820},{"path":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1612117580510},{"path":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1612117585820},{"path":"C:\\Users\\thoma\\OneDrive\\Bureau\\iut\\projet_S3\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1612117788453}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvdGhvbWEvT25lRHJpdmUvQnVyZWF1L2l1dC9wcm9qZXRfUzMvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFZ1ZUp3dERlY29kZSBmcm9tICJ2dWUtand0LWRlY29kZSI7CmltcG9ydCBIZWFkZXIgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9oZWFkZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsibm9tVXRpbGlzYXRldXIiXSwKICBjb21wb25lbnRzOiB7CiAgICBIZWFkZXI6IEhlYWRlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJMb2dpbjogIiIsCiAgICAgIGZvcnVtOiB7CiAgICAgICAgbm9tRm9ydW06ICIiLAogICAgICAgIHR5cGVGb3J1bTogIiIsCiAgICAgICAgZGVzY3JpcHRpb25Gb3J1bTogIiIsCiAgICAgICAgaWxsdXN0cmF0aW9uRm9ydW06ICIiLAogICAgICAgIGRhdGVGb3J1bTogIiIsCiAgICAgICAgYXV0ZXVyRm9ydW06ICIiCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldEltYWdlOiBmdW5jdGlvbiByZXNldEltYWdlKCkgewogICAgICB2YXIgaW5wdXRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5pbnB1dF9pbWFnZSIpOwogICAgICBpbnB1dEltYWdlLnZhbHVlID0gIiI7CiAgICB9LAogICAgZ2V0SW5mb1VzZXI6IGZ1bmN0aW9uIGdldEluZm9Vc2VyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcGFyYW1zLCBpbmZvOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICBub21VdGlsaXNhdGV1cjogX3RoaXMubm9tVXRpbGlzYXRldXIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kaHR0cC5nZXQoIi91c2VyL25vbVV0aWxpc2F0ZXVyIiwgewogICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGluZm8gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMudXNlciA9IGluZm8uZGF0YS51c2VyOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA4OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0VXNlckRldGFpbHM6IGZ1bmN0aW9uIGdldFVzZXJEZXRhaWxzKCkgewogICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0Iik7CgogICAgICBpZiAoIXRva2VuKSB7CiAgICAgICAgdGhpcy51c2VyTG9naW4gPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBkZWNvZGVkID0gVnVlSnd0RGVjb2RlLmRlY29kZSh0b2tlbik7CiAgICAgICAgdGhpcy51c2VyTG9naW4gPSBkZWNvZGVkLm5vbVV0aWxpc2F0ZXVyOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlckxvZ2luKTsKICAgICAgfQogICAgfSwKICAgIHJlZ2lzdGVyRm9ydW06IGZ1bmN0aW9uIHJlZ2lzdGVyRm9ydW0oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHRpdHJlLCBkZXNjcmlwdGlvbiwgdHlwZSwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRpdHJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpdHJlJykudmFsdWU7CiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0YXJlYScpLnZhbHVlOwogICAgICAgICAgICAgICAgdHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50eXBlJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aXRyZSwgdHlwZSwgZGVzY3JpcHRpb24pOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA0OwogICAgICAgICAgICAgICAgX3RoaXMyLmZvcnVtLm5vbUZvcnVtID0gdGl0cmU7CiAgICAgICAgICAgICAgICBfdGhpczIuZm9ydW0uZGF0ZUZvcnVtID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgIF90aGlzMi5mb3J1bS5hdXRldXJGb3J1bSA9IF90aGlzMi51c2VyTG9naW47CiAgICAgICAgICAgICAgICBfdGhpczIuZm9ydW0uaWxsdXN0cmF0aW9uRm9ydW0gPSAiL2NsaWVudC9zcmMvYXNzZXRzL3BhdHRlcm4ucG5nIjsKICAgICAgICAgICAgICAgIF90aGlzMi5mb3J1bS5kZXNjcmlwdGlvbkZvcnVtID0gZGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICBfdGhpczIuZm9ydW0udHlwZUZvcnVtID0gdHlwZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMi5mb3J1bSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi4kaHR0cC5wb3N0KCIvYWRkRm9ydW0iLCBfdGhpczIuZm9ydW0pOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTg7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oNCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDIudDApOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzQsIDE4XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFVzZXJEZXRhaWxzKCk7CiAgfQp9Ow=="},{"version":3,"sources":["ajouterForum.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <Header />\r\n    <div class=\"wrapper\">\r\n      <h2 class=\"title\">Nouveau forum</h2>\r\n      <form class=\"form\">\r\n        <label class=\"form_label\">Titre :</label>\r\n        <input type=\"text\" class=\"form_input titre\" name=\"titreForum\" />\r\n        <label class=\"form_label\">Type :</label>\r\n        <select name=\"type\" class=\"form_input type\">\r\n          <option value=\"publique\">Publique</option>\r\n          <option value=\"privée\">Privée</option>\r\n        </select>\r\n        <label class=\"form_label\">Description :</label>\r\n        <textarea\r\n          name=\"description\"\r\n          class=\"form_input textarea\"\r\n          cols=\"30\"\r\n          rows=\"10\"\r\n        ></textarea>\r\n        <label class=\"form_label\">Ajouter une photo : </label>\r\n        <div class=\"inputImage_wrapper\">\r\n          <input type=\"file\" class=\"form_input input_image\" />\r\n          <span @click=\"resetImage\" class=\"reset_image\">Reset image</span>\r\n        </div>\r\n\r\n        <input  type=\"submit\" value=\"Publier forum\" />\r\n        <!-- <router-link class=\"retour\">Retour</router-link> -->\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport VueJwtDecode from \"vue-jwt-decode\";\r\nimport Header from \"../../components/header\";\r\n\r\nexport default {\r\n  props: [\"nomUtilisateur\"],\r\n  components: {\r\n    Header,\r\n  },\r\n  data() {\r\n    return {\r\n      userLogin: \"\",\r\n      forum: {\r\n        nomForum: \"\",\r\n        typeForum: \"\",\r\n        descriptionForum: \"\",\r\n        illustrationForum: \"\",\r\n        dateForum: \"\",\r\n        auteurForum: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    resetImage() {\r\n      let inputImage = document.querySelector(\".input_image\");\r\n      inputImage.value = \"\";\r\n    },\r\n  async getInfoUser() {\r\n      try {\r\n        const params = {\r\n          nomUtilisateur: this.nomUtilisateur,\r\n        };\r\n        const info = await this.$http.get(`/user/nomUtilisateur`, { params });\r\n        this.user = info.data.user;\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    getUserDetails() {\r\n      \r\n      let token = localStorage.getItem(\"jwt\");\r\n      if (!token) {\r\n        this.userLogin = null;\r\n      } else {\r\n        let decoded = VueJwtDecode.decode(token);\r\n        this.userLogin = decoded.nomUtilisateur;\r\n        console.log(this.userLogin)\r\n      }\r\n    },\r\n  \r\n  \r\n    \r\n    async registerForum(){\r\n      \r\n      let titre = document.querySelector('.titre').value;\r\n      let description = document.querySelector('.textarea').value;\r\n      let type = document.querySelector('.type').value;\r\n      console.log(titre,type,description);\r\n      try{\r\n        this.forum.nomForum = titre;\r\n        this.forum.dateForum = new Date();\r\n        this.forum.auteurForum = this.userLogin;\r\n        this.forum.illustrationForum = \"/client/src/assets/pattern.png\";\r\n        this.forum.descriptionForum = description;\r\n        this.forum.typeForum = type;\r\n        console.log(this.forum)\r\n        let response = await this.$http.post(\"/addForum\",this.forum);\r\n        console.log(response);\r\n      }catch(err){\r\n       console.log(err)\r\n      }\r\n    }\r\n    ,\r\n  \r\n  },\r\n  created() {\r\n    this.getUserDetails();\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  width: 80%;\r\n  max-width: 1300px;\r\n}\r\n\r\n.form {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  &_input {\r\n    border: solid 1px #26f191;\r\n    border-radius: 5px;\r\n    padding: 0.5em;\r\n  }\r\n  .textarea {\r\n    resize: none;\r\n  }\r\n\r\n  .inputImage_wrapper {\r\n    .reset_image {\r\n      cursor: pointer;\r\n      display: inline-block;\r\n      margin-left: 1em;\r\n      color: #2692f1;\r\n    }\r\n  }\r\n\r\n  &_input:focus {\r\n    outline: none;\r\n    border: solid 2px #2692f1;\r\n    border-radius: 5px;\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/forum"}]}