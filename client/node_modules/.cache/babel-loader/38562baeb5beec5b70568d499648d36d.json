{"remainingRequest":"C:\\Users\\clemf\\Desktop\\Perso\\Projet_En_Cours\\ProjetS3\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\clemf\\Desktop\\Perso\\Projet_En_Cours\\ProjetS3\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\clemf\\Desktop\\Perso\\Projet_En_Cours\\ProjetS3\\client\\src\\router\\index.js","dependencies":[{"path":"C:\\Users\\clemf\\Desktop\\Perso\\Projet_En_Cours\\ProjetS3\\client\\src\\router\\index.js","mtime":1607017355512},{"path":"C:\\Users\\clemf\\Desktop\\Perso\\Projet_En_Cours\\ProjetS3\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1607017346225},{"path":"C:\\Users\\clemf\\Desktop\\Perso\\Projet_En_Cours\\ProjetS3\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1607017345938},{"path":"C:\\Users\\clemf\\Desktop\\Perso\\Projet_En_Cours\\ProjetS3\\client\\node_modules\\eslint-loader\\index.js","mtime":1607017348179}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAidnVlLXJvdXRlciI7CmltcG9ydCBWdWVKd3REZWNvZGUgZnJvbSAidnVlLWp3dC1kZWNvZGUiOwppbXBvcnQgSG9tZSBmcm9tICIuLi92aWV3cy9Ib21lLnZ1ZSI7ClZ1ZS51c2UoVnVlUm91dGVyKTsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogIi8iLAogIG5hbWU6ICJob21lIiwKICBjb21wb25lbnQ6IEhvbWUsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiBmYWxzZQogIH0KfSwgewogIHBhdGg6ICIvbG9naW4iLAogIG5hbWU6ICJsb2dpbiIsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCIuLi92aWV3cy9Vc2VyL0xvZ2luLnZ1ZSIpOwogIH0KfSwgewogIHBhdGg6ICIvcmVnaXN0ZXIiLAogIG5hbWU6ICJyZWdpc3RlciIsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCIuLi92aWV3cy9SZWdpc3Rlci52dWUiKTsKICB9Cn0sIHsKICBwYXRoOiAiL21lbWJyZS86ZW1haWwiLAogIG5hbWU6ICJhZmZpY2hlck1lbWJyZSIsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCIuLi92aWV3cy9Vc2VyL1VzZXJJbmZvLnZ1ZSIpOwogIH0sCiAgcHJvcHM6IHRydWUsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlCiAgfQp9LCB7CiAgcGF0aDogIi9tZW1icmUvOmVtYWlsL2VkaXQiLAogIG5hbWU6ICJtb2RpZmllck1lbWJyZSIsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCIuLi92aWV3cy9Vc2VyL1VzZXJFZGl0LnZ1ZSIpOwogIH0sCiAgcHJvcHM6IHRydWUsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlCiAgfSwKICBiZWZvcmVFbnRlcjogZnVuY3Rpb24gYmVmb3JlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIGNvbnNvbGUubG9nKHRvLnBhcmFtcy5lbWFpbCk7CiAgICBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0IikpOwogICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dCIpOwoKICAgIGlmICh0b2tlbiA9PT0gbnVsbCkgewogICAgICBuZXh0KHsKICAgICAgICBwYXRoOiAiL2xvZ2luIgogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBkZWNvZGVkID0gVnVlSnd0RGVjb2RlLmRlY29kZSh0b2tlbik7CgogICAgICBpZiAoZGVjb2RlZC5lbWFpbCA9PT0gdG8ucGFyYW1zLmVtYWlsKSB7CiAgICAgICAgbmV4dCgpOwogICAgICB9IGVsc2UgewogICAgICAgIG5leHQoewogICAgICAgICAgcGF0aDogIi8iCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn0sIC8vIHsKLy8gICBwYXRoOiAiL21vbmNvbXB0ZS9tb2RpZmllciIsCi8vICAgbmFtZTogInVzZXJJbmZvRWRpdCIsCi8vICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoIi4uLyIpCi8vIH0sCnsKICBwYXRoOiAiL2FubnVhaXJlLW1lbWJyZXMiLAogIG5hbWU6ICJBbm51YWlyZU1lbWJyZXMiLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgiLi4vdmlld3MvQW5udWFpcmVNZW1icmVzLnZ1ZSIpOwogIH0sCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlCiAgfQp9LCB7CiAgcGF0aDogIi9hZG1pbi91c2VycyIsCiAgbmFtZTogIkFkbWluVXNlcnMiLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgiLi4vdmlld3MvQWRtaW5Vc2Vycy52dWUiKTsKICB9LAogIG1ldGE6IHsKICAgIHJlcXVpcmVzQXV0aDogdHJ1ZQogIH0KfV07CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAiaGlzdG9yeSIsCiAgYmFzZTogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgcm91dGVzOiByb3V0ZXMKfSk7CnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIGlmICh0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgcmV0dXJuIHJlY29yZC5tZXRhLnJlcXVpcmVzQXV0aDsKICB9KSkgewogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3QiKSA9PSBudWxsKSB7CiAgICAgIG5leHQoewogICAgICAgIHBhdGg6ICIvbG9naW4iCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["C:/Users/clemf/Desktop/Perso/Projet_En_Cours/ProjetS3/client/src/router/index.js"],"names":["Vue","VueRouter","VueJwtDecode","Home","use","routes","path","name","component","meta","requiresAuth","props","beforeEnter","to","from","next","console","log","params","email","localStorage","getItem","token","decoded","decode","router","mode","base","process","env","BASE_URL","beforeEach","matched","some","record"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\r\nimport VueRouter from \"vue-router\";\r\nimport VueJwtDecode from \"vue-jwt-decode\";\r\nimport Home from \"../views/Home.vue\";\r\n\r\nVue.use(VueRouter);\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    name: \"home\",\r\n    component: Home,\r\n    meta: {\r\n      requiresAuth: false,\r\n    },\r\n  },\r\n  {\r\n    path: \"/login\",\r\n    name: \"login\",\r\n    component: () => import(\"../views/User/Login.vue\"),\r\n  },\r\n  {\r\n    path: \"/register\",\r\n    name: \"register\",\r\n    component: () => import(\"../views/Register.vue\"),\r\n  },\r\n  {\r\n    path: \"/membre/:email\",\r\n    name: \"afficherMembre\",\r\n    component: () => import(\"../views/User/UserInfo.vue\"),\r\n    props: true,\r\n    meta: {\r\n      requiresAuth: true,\r\n    },\r\n  },\r\n  {\r\n    path: \"/membre/:email/edit\",\r\n    name: \"modifierMembre\",\r\n    component: () => import(\"../views/User/UserEdit.vue\"),\r\n    props: true,\r\n    meta: {\r\n      requiresAuth: true,\r\n    },\r\n    beforeEnter: (to, from, next) => {\r\n      console.log(to.params.email);\r\n      console.log(localStorage.getItem(\"jwt\"));\r\n      let token = localStorage.getItem(\"jwt\");\r\n            if(token === null){\r\n              next({\r\n                path: \"/login\",\r\n              });\r\n            } else {\r\n                let decoded = VueJwtDecode.decode(token);\r\n                if (decoded.email === to.params.email) {\r\n                  next();\r\n                } else {\r\n                  next({\r\n                    path: \"/\",\r\n                  });\r\n                }\r\n                \r\n            }\r\n      \r\n    }\r\n  },\r\n\r\n  // {\r\n  //   path: \"/moncompte/modifier\",\r\n  //   name: \"userInfoEdit\",\r\n  //   component: () => import(\"../\")\r\n  // },\r\n  {\r\n    path: \"/annuaire-membres\",\r\n    name: \"AnnuaireMembres\",\r\n    component: () => import(\"../views/AnnuaireMembres.vue\"),\r\n    meta: {\r\n      requiresAuth: true,\r\n    },\r\n  },\r\n  {\r\n    path: \"/admin/users\",\r\n    name: \"AdminUsers\",\r\n    component: () => import(\"../views/AdminUsers.vue\"),\r\n    meta: {\r\n      requiresAuth: true,\r\n    },\r\n  },\r\n];\r\n\r\nconst router = new VueRouter({\r\n  mode: \"history\",\r\n  base: process.env.BASE_URL,\r\n  routes,\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.matched.some((record) => record.meta.requiresAuth)) {\r\n    if (localStorage.getItem(\"jwt\") == null) {\r\n      next({\r\n        path: \"/login\",\r\n      });\r\n    } else {\r\n      next();\r\n    }\r\n  } else {\r\n    next();\r\n  }\r\n});\r\n\r\nexport default router;\r\n"]}]}